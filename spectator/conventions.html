<!doctype html>
<html lang="en">
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet"
href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
crossorigin="anonymous">
<link rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0="
crossorigin="anonymous">
<link rel="stylesheet" href="../css/page.css">

<title>Atlas</title>
</head>
<body>
<header class="navbar navbar-expand-lg navbar-dark" id="nav-top">
<a class="navbar-brand" href="../index.html">
<img src="..//images/atlas_logo_small.png" width="40px" height="40px"/>
</a>
<button class="navbar-toggler"
type="button"
data-toggle="collapse"
data-target="#navbarSupportedContent"
aria-controls="navbarSupportedContent"
aria-expanded="false"
aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>

<div class="collapse navbar-collapse" id="navbarSupportedContent">
<ul class="navbar-nav mr-auto">
<li class="nav-item active">
<a class="nav-link" href="../index.html">
<span style="font-size: 1.8em;">Atlas</span>
</a>
</li>
</ul>
<button type="button" class="btn btn-outline-light" data-toggle="modal" data-target="#search-modal">
<span class="fa fa-search"></span>
</button>
</div>
</header>

<div id="search-modal" class="modal" tabindex="-1" role="dialog">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<form style="min-width: 100%">
<input class="form-control form-control-sm" id="search" type="text" autocomplete="off">
</form>
</div>
<div class="modal-body">
<div id="search-results"></div>
</div>
</div>
</div>
</div>

<div class="container-fluid">
<div class="row flex-xl-nowrap justify-content-md-center">
<div class="col-12 col-md-3 col-xl-2" id="nav-left">
<ul>
  <li><a href="../overview.html" class="page">Overview</a></li>
  <li><a href="../getting-started.html" class="page">Getting Started</a></li>
  <li><a href="../concepts.html" class="page">Concepts</a></li>
  <li><a href="../presentations.html" class="page">Presentations</a></li>
  <li><a href="../asl/index.html" class="page">Stack Language</a>
  <ul>
    <li><a href="../asl/alerting.html" class="page">Alerting Expressions</a></li>
    <li><a href="../asl/alerting-philosophy.html" class="page">Alerting Philosophy</a></li>
    <li><a href="../asl/des.html" class="page">Double Exponential Smoothing</a></li>
  </ul></li>
  <li><a href="../asl-reference/index.html" class="page">Stack Language Reference</a>
  <ul>
    <li><a href="../asl-reference/and.html" class="page">and</a></li>
    <li><a href="../asl-reference/dist-avg.html" class="page">dist-avg</a></li>
    <li><a href="../asl-reference/eq.html" class="page">eq</a></li>
  </ul></li>
  <li><a href="../spectator/index.html" class="page">Spectator</a>
  <ul>
    <li><a href="../spectator/registry.html" class="page">Registry</a></li>
    <li><a href="../spectator/counters.html" class="page">Counters</a></li>
    <li><a href="../spectator/timers.html" class="page">Timers</a></li>
    <li><a href="../spectator/dist-summaries.html" class="page">Distribution Summaries</a></li>
    <li><a href="../spectator/gauges.html" class="page">Gauges</a></li>
    <li><a href="../spectator/clock.html" class="page">Clock</a></li>
    <li><a href="../spectator/testing.html" class="page">Testing</a></li>
    <li><a href="../spectator/netflix.html" class="page">Netflix Integration</a></li>
    <li><a href="../spectator/conventions.html" class="active page">Names</a></li>
    <li><a href="../spectator/servo.html" class="page">Servo Comparison</a></li>
  </ul></li>
  <li><a href="../spectator-ext/index.html" class="page">Spectator Extensions</a>
  <ul>
    <li><a href="../spectator-ext/jvm-buffer-pools.html" class="page">Buffer Pools</a></li>
    <li><a href="../spectator-ext/jvm-gc.html" class="page">Garbage Collection</a></li>
    <li><a href="../spectator-ext/jvm-gc-causes.html" class="page">GC Causes</a></li>
    <li><a href="../spectator-ext/jvm-memory-pools.html" class="page">Memory Pools</a></li>
    <li><a href="../spectator-ext/thread-pools.html" class="page">Thread Pools</a></li>
    <li><a href="../spectator-ext/log4j1.html" class="page">Log4j1 Appender</a></li>
    <li><a href="../spectator-ext/log4j2.html" class="page">Log4j2 Appender</a></li>
    <li><a href="../spectator-ext/placeholders.html" class="page">Placeholders</a></li>
  </ul></li>
  <li><a href="../spectator-reg/index.html" class="page">Spectator Registries</a>
  <ul>
    <li><a href="../spectator-reg/metrics3.html" class="page">Metrics3 Registry</a></li>
    <li><a href="../spectator-reg/servo.html" class="page">Servo Registry</a></li>
  </ul></li>
</ul>
</div>
<div class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5" id="content">
<p>Quick summary:</p>
<ol>
  <li>Names
    <ul>
      <li>Describe the measurement being collected</li>
      <li>Use camel case</li>
      <li>Static</li>
      <li>Succinct</li>
    </ul>
  </li>
  <li>Tags
    <ul>
      <li>Should be used for dimensional drill-down</li>
      <li>Be careful about combinatorial explosion</li>
      <li>Tag keys should be static</li>
      <li>Use <code>id</code> to distinguish between instances</li>
    </ul>
  </li>
  <li>Use base units</li>
</ol>
<h2><a href="#names" name="names" class="anchor"><span class="anchor-link"></span></a>Names</h2>
<h3><a href="#describe-the-measurement" name="describe-the-measurement" class="anchor"><span class="anchor-link"></span></a>Describe the measurement</h3>
<h3><a href="#use-camel-case" name="use-camel-case" class="anchor"><span class="anchor-link"></span></a>Use camel case</h3>
<p>The main goal here is to promote consistency which makes it easier for users. The choice of style is somewhat arbitrary, camel case was chosen because:</p>
<ul>
  <li>Used by snmp</li>
  <li>Used by java</li>
  <li>It was the most common in use at Netflix when this guideline was added</li>
</ul>
<p>The exception to this rule is where there is an established common case. For example with Amazon regions it is preferred to use us-east-1 rather than usEast1 as it is the more common form.</p>
<h3><a href="#static" name="static" class="anchor"><span class="anchor-link"></span></a>Static</h3>
<p>There shouldn&rsquo;t be any dynamic content that goes into a metric name. Metric names and associated tag keys are how users will interact with the data being produced. </p>
<h3><a href="#succinct" name="succinct" class="anchor"><span class="anchor-link"></span></a>Succinct</h3>
<p>Long names should be avoided. </p>
<h2><a href="#tags" name="tags" class="anchor"><span class="anchor-link"></span></a>Tags</h2>
<p>Historically tags have been used to play one of two roles:</p>
<ul>
  <li><em>Dimensions</em>: dimensions are the primary use and it allows the data to be sliced and diced so  it is possible to drill down into the data.</li>
  <li><em>Namespace</em>: similar to packages in Java in this mode it would be used to group related data.  This type of usage is discouraged.</li>
</ul>
<p>As a general rule it should be possible to use the name as a pivot. This means that if just the name is selected, then the user can drill down using other dimensions and be able to reason about the value being shown. </p>
<p>As a concrete example, suppose we have two metrics:</p>
<ol>
  <li>The number of threads currently in a thread pool.</li>
  <li>The number of rows in a database table.</li>
</ol>
<h3><a href="#bad-approach" name="bad-approach" class="anchor"><span class="anchor-link"></span></a>Bad approach</h3>
<pre class="prettyprint"><code class="language-java">Id poolSize = registry.createId(&quot;size&quot;)
  .withTag(&quot;class&quot;, &quot;ThreadPool&quot;)
  .withTag(&quot;id&quot;, &quot;server-requests&quot;);
  
Id poolSize = registry.createId(&quot;size&quot;)
  .withTag(&quot;class&quot;, &quot;Database&quot;)
  .withTag(&quot;table&quot;, &quot;users&quot;);  
</code></pre>
<p>In this approach, if I select the name, <code>size</code>, it will match both the version for ThreadPool and Database classes. So you would get a value that is the an aggregate of the number of threads and the number of items in a database. </p>
<h3><a href="#recommended" name="recommended" class="anchor"><span class="anchor-link"></span></a>Recommended</h3>
<pre class="prettyprint"><code class="language-java">Id poolSize = registry.createId(&quot;threadpool.size&quot;)
  .withTag(&quot;id&quot;, &quot;server-requests&quot;);
  
Id poolSize = registry.createId(&quot;db.size&quot;)
  .withTag(&quot;table&quot;, &quot;users&quot;);  
</code></pre>
<p>This variant provides enough context so that if just the name is selected the value can be reasoned about and is at least potentially meaningful. For example if I select <code>threadpool.size</code> I can see the total number of threads in all pools. Then I can group by or select an <code>id</code> to drill down further.</p>
<h2><a href="#use-base-units" name="use-base-units" class="anchor"><span class="anchor-link"></span></a>Use base units</h2>
<p>Keep measurements in base units where possible. For example I would rather have all timers in seconds, disk sizes should be bytes, or network rates should be bytes/second. The reason is that for my uses this usually means the unit is obvious from the name. It also means the SI prefix shown on the graph images make more sense, e.g. 1k is 1 kilobyte not 1 kilo-megabyte.</p>

<div class="nav-next">
<p><strong>Next:</strong> <a href="../spectator/servo.html">Servo Comparison</a></p>
</div>
</div>
<div class="d-none d-xl-block col-xl-2" id="nav-right">
<ul>
  <li><a href="../spectator/conventions.html#names" class="header">Names</a>
  <ul>
    <li><a href="../spectator/conventions.html#describe-the-measurement" class="header">Describe the measurement</a></li>
    <li><a href="../spectator/conventions.html#use-camel-case" class="header">Use camel case</a></li>
    <li><a href="../spectator/conventions.html#static" class="header">Static</a></li>
    <li><a href="../spectator/conventions.html#succinct" class="header">Succinct</a></li>
    <li><a href="../spectator/conventions.html#tags" class="header">Tags</a>
    <ul>
      <li><a href="../spectator/conventions.html#bad-approach" class="header">Bad approach</a></li>
      <li><a href="../spectator/conventions.html#recommended" class="header">Recommended</a></li>
    </ul></li>
    <li><a href="../spectator/conventions.html#use-base-units" class="header">Use base units</a></li>
  </ul></li>
</ul>
</div>
</div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/lunr@2.1.6/lunr.js"
integrity="sha256-U3smMZ6uKxtHEAX38FWHzhjlVgfcm5Xvs0Gp8t3unQk="
crossorigin="anonymous"></script>
<script src="..//js/page.js"></script>

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=scala"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>
</body>
</html>
