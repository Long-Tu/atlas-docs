<!doctype html>
<html lang="en">
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet"
href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
crossorigin="anonymous">
<link rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0="
crossorigin="anonymous">
<link rel="stylesheet" href="../css/page.css">

<title>Atlas</title>
</head>
<body>
<header class="navbar navbar-expand-lg navbar-dark" id="nav-top">
<a class="navbar-brand" href="../index.html">
<img src="../images/atlas_logo_small.png" width="40px" height="40px"/>
</a>
<ul class="navbar-nav mr-auto">
<li class="nav-item active">
<a class="nav-link" href="../index.html">
<span style="font-size: 1.8em;">Atlas</span>
</a>
</li>
</ul>

<button type="button" class="btn btn-outline-light" data-toggle="modal" data-target="#search-modal">
<span class="fa fa-search"></span>
</button>
</header>

<div id="search-modal" class="modal" tabindex="-1" role="dialog">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<form style="min-width: 100%">
<input class="form-control form-control-sm" id="search" type="text" autocomplete="off">
</form>
</div>
<div class="modal-body">
<div id="search-results"></div>
</div>
</div>
</div>
</div>

<div class="container-fluid">
<div class="row flex-xl-nowrap justify-content-md-center">
<div class="d-none d-lg-block col-lg-2 col-xl-2" id="nav-left">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-python">Python</option></select>
<ul>
  <li><a href="../overview.html" class="page">Overview</a></li>
  <li><a href="../getting-started.html" class="page">Getting Started</a></li>
  <li><a href="../concepts.html" class="page">Concepts</a></li>
  <li><a href="../presentations.html" class="page">Presentations</a></li>
  <li><a href="../asl/index.html" class="page">Stack Language</a>
  <ul>
    <li><a href="../asl/alerting.html" class="page">Alerting Expressions</a></li>
    <li><a href="../asl/alerting-philosophy.html" class="page">Alerting Philosophy</a></li>
    <li><a href="../asl/des.html" class="page">Double Exponential Smoothing</a></li>
  </ul></li>
  <li><a href="../asl-reference/index.html" class="page">Stack Language Reference</a>
  <ul>
    <li><a href="../asl-reference/and.html" class="page">and</a></li>
    <li><a href="../asl-reference/des.html" class="page">des</a></li>
    <li><a href="../asl-reference/des-epic-signal.html" class="page">des-epic-signal</a></li>
    <li><a href="../asl-reference/des-epic-viz.html" class="page">des-epic-viz</a></li>
    <li><a href="../asl-reference/des-fast.html" class="page">des-fast</a></li>
    <li><a href="../asl-reference/des-slow.html" class="page">des-slow</a></li>
    <li><a href="../asl-reference/des-slower.html" class="page">des-slower</a></li>
    <li><a href="../asl-reference/dist-avg.html" class="page">dist-avg</a></li>
    <li><a href="../asl-reference/eq.html" class="page">eq</a></li>
    <li><a href="../asl-reference/sdes.html" class="page">sdes</a></li>
    <li><a href="../asl-reference/sdes-fast.html" class="page">sdes-fast</a></li>
    <li><a href="../asl-reference/sdes-slow.html" class="page">sdes-slow</a></li>
    <li><a href="../asl-reference/sdes-slower.html" class="page">sdes-slower</a></li>
  </ul></li>
  <li><a href="../spectator/index.html" class="page">Spectator</a>
  <ul>
    <li><a href="../spectator/registry.html" class="page">Registry</a></li>
    <li><a href="../spectator/counters.html" class="page">Counters</a></li>
    <li><a href="../spectator/timers.html" class="page">Timers</a></li>
    <li><a href="../spectator/dist-summaries.html" class="page">Distribution Summaries</a></li>
    <li><a href="../spectator/gauges.html" class="page">Gauges</a></li>
    <li><a href="../spectator/clock.html" class="page">Clock</a></li>
    <li><a href="../spectator/testing.html" class="page">Testing</a></li>
    <li><a href="../spectator/netflix.html" class="page">Netflix Integration</a></li>
    <li><a href="../spectator/conventions.html" class="page">Names</a></li>
    <li><a href="../spectator/servo.html" class="page">Servo Comparison</a></li>
  </ul></li>
  <li><a href="../spectator-ext/index.html" class="page">Spectator Extensions</a>
  <ul>
    <li><a href="../spectator-ext/jvm-buffer-pools.html" class="page">Buffer Pools</a></li>
    <li><a href="../spectator-ext/jvm-gc.html" class="page">Garbage Collection</a></li>
    <li><a href="../spectator-ext/jvm-gc-causes.html" class="page">GC Causes</a></li>
    <li><a href="../spectator-ext/jvm-memory-pools.html" class="active page">Memory Pools</a></li>
    <li><a href="../spectator-ext/thread-pools.html" class="page">Thread Pools</a></li>
    <li><a href="../spectator-ext/log4j1.html" class="page">Log4j1 Appender</a></li>
    <li><a href="../spectator-ext/log4j2.html" class="page">Log4j2 Appender</a></li>
    <li><a href="../spectator-ext/placeholders.html" class="page">Placeholders</a></li>
  </ul></li>
  <li><a href="../spectator-reg/index.html" class="page">Spectator Registries</a>
  <ul>
    <li><a href="../spectator-reg/metrics3.html" class="page">Metrics3 Registry</a></li>
    <li><a href="../spectator-reg/servo.html" class="page">Servo Registry</a></li>
  </ul></li>
</ul>
</div>
<div class="col-12 col-md-9 col-xl-8 py-md-3" id="content">
<h1><a href="#memory-pools" name="memory-pools" class="anchor"><span class="anchor-link"></span></a>Memory Pools</h1>
<p>Uses the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryPoolMXBean.html">MemoryPoolMXBean</a> provided by the JDK to monitor the sizes of java memory spaces such as perm gen, eden, old gen, etc. </p>
<h2><a href="#getting-started" name="getting-started" class="anchor"><span class="anchor-link"></span></a>Getting Started</h2>
<p>To get information about memory pools in spectator just setup registration of standard MXBeans. Note, if you are building an app at Netflix this should happen automatically via the normal platform initialization.</p>
<pre class="prettyprint"><code class="language-java">import com.netflix.spectator.api.Spectator;
import com.netflix.spectator.jvm.Jmx;

Jmx.registerStandardMXBeans(Spectator.registry());
</code></pre>
<h2><a href="#metrics" name="metrics" class="anchor"><span class="anchor-link"></span></a>Metrics</h2>
<h3><a href="#jvm-memory-used" name="jvm-memory-used" class="anchor"><span class="anchor-link"></span></a>jvm.memory.used</h3>
<p>Gauge reporting the current amount of memory used. For the young and old gen pools this metric will typically have a sawtooth pattern. For alerting or detecting memory pressure the <a href="https://github.com/Netflix/spectator/wiki/Garbage-Collection#jvmgclivedatasize">live data size</a> is probably a better option.</p>
<p><strong>Unit:</strong> bytes</p>
<p><strong>Dimensions:</strong> see <a href="#metric-dimensions">metric dimensions</a></p>
<h3><a href="#jvm-memory-committed" name="jvm-memory-committed" class="anchor"><span class="anchor-link"></span></a>jvm.memory.committed</h3>
<p>Gauge reporting the current amount of memory committed. From the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryUsage.html">javadocs</a>, committed is:</p>
<blockquote>
  <p>The amount of memory (in bytes) that is guaranteed to be available for use by the Java virtual machine. The amount of committed memory may change over time (increase or decrease). The Java virtual machine may release memory to the system and committed could be less than init. committed will always be greater than or equal to used.</p>
</blockquote>
<p><strong>Unit:</strong> bytes </p>
<p><strong>Dimensions:</strong> see <a href="#metric-dimensions">metric dimensions</a></p>
<h3><a href="#jvm-memory-max" name="jvm-memory-max" class="anchor"><span class="anchor-link"></span></a>jvm.memory.max</h3>
<p>Gauge reporting the max amount of memory that can be used. From the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryUsage.html">javadocs</a>, max is:</p>
<blockquote>
  <p>The maximum amount of memory (in bytes) that can be used for memory management. Its value may be undefined. The maximum amount of memory may change over time if defined. The amount of used and committed memory will always be less than or equal to max if max is defined. A memory allocation may fail if it attempts to increase the used memory such that <code>used &gt; committed</code> even if <code>used &lt;= max</code> would still be true (for example, when the system is low on virtual memory).</p>
</blockquote>
<p><strong>Unit:</strong> bytes </p>
<p><strong>Dimensions:</strong> see <a href="#metric-dimensions">metric dimensions</a></p>
<h2><a href="#metric-dimensions" name="metric-dimensions" class="anchor"><span class="anchor-link"></span></a>Metric Dimensions</h2>
<p>All memory metrics have the following dimensions:</p>
<ul>
  <li><code>id</code>: name of the memory pool being reported. The names of the pools vary depending on the  garbage collector algorithm being used.</li>
  <li><code>memtype</code>: type of memory. It has two possible values: <code>HEAP</code> and <code>NON_HEAP</code>. For more  information see the javadocs for <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryType.html">MemoryType</a>.</li>
</ul>

<div class="nav-next">
<p><strong>Next:</strong> <a href="../spectator-ext/thread-pools.html">Thread Pools</a></p>
</div>
</div>
<div class="d-none d-xl-block col-xl-2" id="nav-right">
<ul>
  <li><a href="../spectator-ext/jvm-memory-pools.html#memory-pools" class="header">Memory Pools</a>
  <ul>
    <li><a href="../spectator-ext/jvm-memory-pools.html#getting-started" class="header">Getting Started</a></li>
    <li><a href="../spectator-ext/jvm-memory-pools.html#metrics" class="header">Metrics</a>
    <ul>
      <li><a href="../spectator-ext/jvm-memory-pools.html#jvm-memory-used" class="header">jvm.memory.used</a></li>
      <li><a href="../spectator-ext/jvm-memory-pools.html#jvm-memory-committed" class="header">jvm.memory.committed</a></li>
      <li><a href="../spectator-ext/jvm-memory-pools.html#jvm-memory-max" class="header">jvm.memory.max</a></li>
    </ul></li>
    <li><a href="../spectator-ext/jvm-memory-pools.html#metric-dimensions" class="header">Metric Dimensions</a></li>
  </ul></li>
</ul>
</div>
</div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/lunr@2.1.6/lunr.js"
integrity="sha256-U3smMZ6uKxtHEAX38FWHzhjlVgfcm5Xvs0Gp8t3unQk="
crossorigin="anonymous"></script>
<script src="../js/page.js"></script>
<script>initialize("../")</script>

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=scala"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>
</body>
</html>
